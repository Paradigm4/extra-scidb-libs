sudo: required

language: python

python:
  - "3.6"

env:
  global: SCIDB_VER=18.1
  matrix:
    - SCIDB_IMG=18.1          TARGET=deb
    - SCIDB_IMG=18.1-trusty   TARGET=deb
    - SCIDB_IMG=18.1-centos-6 TARGET=rpm

services:
  - docker

before_install:
  - docker pull rvernica/scidb:${SCIDB_IMG}
  - docker run
    --name scidb
    --detach
    --publish 8080:8080
    --volume `pwd`:/this
    rvernica/scidb:${SCIDB_IMG}

script:
  - docker exec scidb /this/setup.sh
  - docker exec scidb /this/extra_scidb_libs.sh
    $TARGET
    /root
    /tmp
    1
